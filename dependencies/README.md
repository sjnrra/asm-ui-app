# 依存ファイルディレクトリ

このディレクトリ（`public/dependencies/`）に配置されたファイルは、アプリ起動時に自動的に読み込まれます。

## 📁 ファイル配置方法

### 1. 依存ファイルの配置

依存関係にあるファイル（`.INC`、`.MAC`、`.ASM`、`.MACLIB`など）をこのディレクトリに配置してください。

```
public/dependencies/
├── dependencies.json    ← 必須ファイル（読み込み対象ファイルのリスト）
├── REGS.INC            ← 例: レジスタEQU定義
├── CONSTANTS.INC       ← 例: 定数定義
├── MACROS.MAC          ← 例: マクロ定義
└── YOURFILE.INC        ← あなたの依存ファイル
```

### 2. dependencies.json の設定

`dependencies.json` ファイルに、読み込みたいファイル名をリストとして記述してください。

```json
{
  "files": [
    "REGS.INC",
    "CONSTANTS.INC",
    "MACROS.MAC",
    "YOURFILE.INC"
  ],
  "description": "依存関係にあるファイルのリスト。このディレクトリにファイルを配置すると、アプリ起動時に自動的に読み込まれます。"
}
```

### 3. アプリの起動

アプリを起動（またはリロード）すると、`dependencies.json` に記載されたファイルが自動的に読み込まれます。

- 読み込まれたファイルは、右側の「読み込み済みファイル」パネルで確認できます
- `COPY` 文でこれらのファイルを参照できます

## 📋 COPY文での使用例

メインソースコードで、このディレクトリに配置したファイルを `COPY` 文で参照できます：

```asm
         COPY  REGS          ← REGS.INC を読み込む
         COPY  CONSTANTS     ← CONSTANTS.INC を読み込む
         COPY  MACROS        ← MACROS.MAC を読み込む
```

## ⚙️ ファイル名の指定ルール

- **ファイル名の大文字・小文字**: 区別しません（`REGS.INC` と `regs.inc` は同じとして扱われます）
- **拡張子の自動検索**: `COPY REGS` と指定すると、`REGS.INC`、`REGS.MAC`、`REGS.ASM` などを自動的に検索します
- **COPY文での指定**: 拡張子なしでファイル名を指定できます（例: `COPY REGS` で `REGS.INC` を参照）

## 🔍 ファイルが見つからない場合

ファイルが見つからない場合、以下の点を確認してください：

1. ファイルが `public/dependencies/` ディレクトリに配置されているか
2. `dependencies.json` にファイル名が正しく記載されているか
3. ファイル名のスペルが正しいか（大文字・小文字は関係ありません）
4. ブラウザのコンソールにエラーメッセージが表示されていないか

## 💡 ヒント

- 依存ファイルを追加した後は、ブラウザをリロード（F5）してください
- ファイルを追加・変更した後は、`dependencies.json` も更新する必要があります
- 右側の「読み込み済みファイル」パネルで、現在読み込まれているファイルを確認できます
